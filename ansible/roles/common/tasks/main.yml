#- import_tasks: load-volumes.yml
#  when: load


  
#- name: Create certs volume
#  docker_volume:
#    name: certs

#- name: Create data-db volume
#  docker_volume:
#    name: data-db

#- name: Create data-backup volume
#  docker_volume:
#    name: data-backup      

# Create the docker network that all the containers will become part Unfetter
# TODO - need to get the docker network to be created if it doesn't exist.  Getting errors right now
#- name: Create the Docker Network - {{ docker_network }}
#  docker_network:
#    state: present
#    name: unfetter_network

- name: Create Repository
  docker_container:
    name: cti-stix-store-repository
    image: "mongo:3.4.1"
    state: started
    networks:
      - name: "{{ docker_network }}"          
    
    pull: true
    volumes:
#    - "{{ prepath }}/unfetter/data/db:/data/db"
    - "mongo-db:/data/db"
    published_ports:
    - "27018:27017"
  when: run_action 